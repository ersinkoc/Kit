<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Validation Module - @oxog/kit</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="../" class="nav-logo">@oxog/kit</a>
      <ul class="nav-menu">
        <li><a href="../#getting-started">Getting Started</a></li>
        <li><a href="../#modules">Modules</a></li>
        <li><a href="./">API Reference</a></li>
        <li><a href="../guides/">Guides</a></li>
        <li><a href="https://github.com/oxog/kit" target="_blank">GitHub</a></li>
      </ul>
    </div>
  </nav>

  <main class="container api-content">
    <div class="api-layout">
      <aside class="api-sidebar">
        <ul>
          <li><a href="#validate">validate</a></li>
          <li><a href="#string-validators">String Validators</a></li>
          <li><a href="#number-validators">Number Validators</a></li>
          <li><a href="#object-validators">Object Validators</a></li>
          <li><a href="#array-validators">Array Validators</a></li>
          <li><a href="#sanitize">sanitize</a></li>
          <li><a href="#transform">transform</a></li>
        </ul>
      </aside>

      <div class="api-main">
        <div class="api-header">
          <h1>@oxog/kit/validation</h1>
          <p>Schema validation, input sanitization, and data transformation</p>
        </div>

        <section class="api-section" id="validate">
          <h2>validate</h2>
          <p>Build validation schemas with a fluent API</p>

          <pre><code>import { validate } from '@oxog/kit/validation';

// Define a schema
const userSchema = validate.object({
  email: validate.string().required().email(),
  password: validate.string().required().min(8),
  age: validate.number().optional().min(0).max(150),
  roles: validate.array(validate.string()).default([]),
});

// Validate data
const result = userSchema.validate({
  email: 'user@example.com',
  password: 'securepassword123',
  age: 25,
});

if (result.valid) {
  console.log(result.data); // Typed and validated data
} else {
  console.log(result.errors); // Array of validation errors
}</code></pre>
        </section>

        <section class="api-section" id="string-validators">
          <h2>String Validators</h2>

          <div class="api-function">
            <h4>validate.string()</h4>
            <p>Create a string validator</p>
            <pre><code>const schema = validate.string()
  .required()
  .min(3)           // Minimum length
  .max(100)         // Maximum length
  .email()          // Valid email format
  .url()            // Valid URL format
  .uuid()           // Valid UUID format
  .pattern(/^[A-Z]/) // Custom regex pattern
  .oneOf(['a', 'b']) // Must be one of values
  .custom((value) => {
    // Custom validation
    if (value.includes('bad')) {
      return 'Cannot contain "bad"';
    }
    return true;
  });</code></pre>
          </div>

          <div class="api-function">
            <h4>.required()</h4>
            <p>Mark field as required (cannot be null, undefined, or empty string)</p>
          </div>

          <div class="api-function">
            <h4>.optional()</h4>
            <p>Mark field as optional (can be undefined)</p>
          </div>

          <div class="api-function">
            <h4>.min(length: number)</h4>
            <p>Set minimum string length</p>
          </div>

          <div class="api-function">
            <h4>.max(length: number)</h4>
            <p>Set maximum string length</p>
          </div>

          <div class="api-function">
            <h4>.email()</h4>
            <p>Validate email format</p>
          </div>

          <div class="api-function">
            <h4>.url()</h4>
            <p>Validate URL format</p>
          </div>

          <div class="api-function">
            <h4>.uuid()</h4>
            <p>Validate UUID format</p>
          </div>

          <div class="api-function">
            <h4>.pattern(regex: RegExp)</h4>
            <p>Validate against custom regex pattern</p>
          </div>

          <div class="api-function">
            <h4>.oneOf(values: string[])</h4>
            <p>Value must be one of the specified values</p>
          </div>

          <div class="api-function">
            <h4>.default(value: string)</h4>
            <p>Set default value if undefined</p>
          </div>
        </section>

        <section class="api-section" id="number-validators">
          <h2>Number Validators</h2>

          <div class="api-function">
            <h4>validate.number()</h4>
            <p>Create a number validator</p>
            <pre><code>const schema = validate.number()
  .required()
  .min(0)           // Minimum value
  .max(100)         // Maximum value
  .integer()        // Must be integer
  .positive()       // Must be > 0
  .negative()       // Must be < 0
  .between(1, 10);  // Between inclusive</code></pre>
          </div>

          <div class="api-function">
            <h4>.min(value: number)</h4>
            <p>Set minimum value (inclusive)</p>
          </div>

          <div class="api-function">
            <h4>.max(value: number)</h4>
            <p>Set maximum value (inclusive)</p>
          </div>

          <div class="api-function">
            <h4>.integer()</h4>
            <p>Must be an integer (no decimals)</p>
          </div>

          <div class="api-function">
            <h4>.positive()</h4>
            <p>Must be greater than 0</p>
          </div>

          <div class="api-function">
            <h4>.negative()</h4>
            <p>Must be less than 0</p>
          </div>

          <div class="api-function">
            <h4>.between(min: number, max: number)</h4>
            <p>Must be between min and max (inclusive)</p>
          </div>
        </section>

        <section class="api-section" id="object-validators">
          <h2>Object Validators</h2>

          <div class="api-function">
            <h4>validate.object(shape: Record&lt;string, Validator&gt;)</h4>
            <p>Create an object validator with shape definition</p>
            <pre><code>const schema = validate.object({
  name: validate.string().required(),
  address: validate.object({
    street: validate.string().required(),
    city: validate.string().required(),
    zip: validate.string().pattern(/^\d{5}$/),
  }).optional(),
});

// Nested validation
const result = schema.validate({
  name: 'John',
  address: {
    street: '123 Main St',
    city: 'Anytown',
    zip: '12345',
  },
});</code></pre>
          </div>

          <div class="api-function">
            <h4>.strict()</h4>
            <p>Reject objects with extra properties not in schema</p>
            <pre><code>const schema = validate.object({
  name: validate.string(),
}).strict();

schema.validate({ name: 'John', extra: 'field' });
// Error: Unknown property "extra"</code></pre>
          </div>

          <div class="api-function">
            <h4>.passthrough()</h4>
            <p>Allow and pass through extra properties not in schema</p>
          </div>
        </section>

        <section class="api-section" id="array-validators">
          <h2>Array Validators</h2>

          <div class="api-function">
            <h4>validate.array(itemSchema: Validator)</h4>
            <p>Create an array validator</p>
            <pre><code>const schema = validate.array(validate.string().email())
  .min(1)           // Minimum length
  .max(10)          // Maximum length
  .unique();        // All items must be unique

// Validate
const result = schema.validate([
  'user1@example.com',
  'user2@example.com',
]);</code></pre>
          </div>

          <div class="api-function">
            <h4>.min(length: number)</h4>
            <p>Set minimum array length</p>
          </div>

          <div class="api-function">
            <h4>.max(length: number)</h4>
            <p>Set maximum array length</p>
          </div>

          <div class="api-function">
            <h4>.unique()</h4>
            <p>All items must be unique</p>
          </div>

          <div class="api-function">
            <h4>.nonempty()</h4>
            <p>Array must have at least one item</p>
          </div>
        </section>

        <section class="api-section" id="sanitize">
          <h2>sanitize</h2>
          <p>Input sanitization utilities</p>

          <div class="api-function">
            <h4>sanitize.stripTags(html: string): string</h4>
            <p>Remove HTML tags from string</p>
            <pre><code>import { sanitize } from '@oxog/kit/validation';

sanitize.stripTags('&lt;p&gt;Hello&lt;/p&gt;'); // 'Hello'</code></pre>
          </div>

          <div class="api-function">
            <h4>sanitize.escape(str: string): string</h4>
            <p>Escape HTML entities</p>
            <pre><code>sanitize.escape('&lt;script&gt;'); // '&amp;lt;script&amp;gt;'</code></pre>
          </div>

          <div class="api-function">
            <h4>sanitize.unescape(str: string): string</h4>
            <p>Unescape HTML entities</p>
          </div>

          <div class="api-function">
            <h4>sanitize.normalizeEmail(email: string): string</h4>
            <p>Normalize email address</p>
            <pre><code>sanitize.normalizeEmail('User@EXAMPLE.com'); // 'user@example.com'</code></pre>
          </div>

          <div class="api-function">
            <h4>sanitize.normalizeUrl(url: string): string</h4>
            <p>Normalize URL</p>
          </div>

          <div class="api-function">
            <h4>sanitize.alphanumeric(str: string): string</h4>
            <p>Remove non-alphanumeric characters</p>
          </div>
        </section>

        <section class="api-section" id="transform">
          <h2>transform</h2>
          <p>Data transformation utilities</p>

          <div class="api-function">
            <h4>transform.trim(str: string): string</h4>
            <p>Trim whitespace from both ends</p>
          </div>

          <div class="api-function">
            <h4>transform.lowercase(str: string): string</h4>
            <p>Convert to lowercase</p>
          </div>

          <div class="api-function">
            <h4>transform.uppercase(str: string): string</h4>
            <p>Convert to uppercase</p>
          </div>

          <div class="api-function">
            <h4>transform.toNumber(val: any): number | null</h4>
            <p>Convert value to number or null if invalid</p>
            <pre><code>import { transform } from '@oxog/kit/validation';

transform.toNumber('42');    // 42
transform.toNumber('abc');   // null</code></pre>
          </div>

          <div class="api-function">
            <h4>transform.toBoolean(val: any): boolean</h4>
            <p>Convert value to boolean</p>
            <pre><code>transform.toBoolean('true');  // true
transform.toBoolean('1');     // true
transform.toBoolean('false'); // false
transform.toBoolean('0');     // false</code></pre>
          </div>

          <div class="api-function">
            <h4>transform.toDate(val: any): Date | null</h4>
            <p>Convert value to Date or null if invalid</p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>@oxog/kit - MIT License</p>
    </div>
  </footer>

  <script src="../js/main.js"></script>
</body>
</html>
